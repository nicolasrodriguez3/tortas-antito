---
import Card from "../../src/components/Card.astro"
import Footer from "../components/Footer.astro"
import Header from "../components/Header.astro"
import Hero from "../components/Hero.astro"
import Torta from "../components/Torta.astro"
import Layout from "../layouts/Layout.astro"

const url =
  "https://docs.google.com/spreadsheets/d/e/2PACX-1vRdGVFGi2nR6Alm4QMNju7gwxLwbvK6pxUdqpiufCe93rSHv8GThwbuQ-7hJA-KOHfbMarXs6n5fjIE/pub?output=csv"

let tortas = []

async function fetchCSVData() {
  const response = await fetch(url)
  const data = await response.text()
  const cleanedData = data.replaceAll("\r", "")
  let tortas = cleanedData.split("\n").map((line, i) => {
    if (i === 0) return line.toLowerCase().split(",")
    return line.split(",")
  })

  const title = tortas[0]
  const [nombre, descripcion, precio, imagenes] = title

  return tortas.map((el) => {
    const [nombreTorta, descripcionTorta, precioTorta, imagenesTorta] = el
    return {
      [nombre]: nombreTorta,
      [descripcion]: descripcionTorta,
      [precio]: precioTorta,
      [imagenes]: imagenesTorta.split(";"),
    }
  })
}
// try {
//   tortas = await fetchCSVData()
// } catch (error) {
//   tortas = []
//   console.log(error)
// }
tortas = [
  {
    nombre: "Lemon Pie",
    descripcion: "Base de bizcochuelo con relleno de limón y cubierto de merengue",
    precio: 12000,
    imagenes: [
      "https://img.freepik.com/foto-gratis/delicioso-pastel-limon-merengue-mesa-madera-ai-generativo_123827-24221.jpg?t=st=1722378697~exp=1722382297~hmac=b33ce70e6d07d28ec8c0858f3277d47920f79b2de5790496781044255c3692dc&w=1380",
    ],
  },
  {
    nombre: "Lemon Pie",
    descripcion: "Base de bizcochuelo con relleno de limón y cubierto de merengue",
    precio: 12000,
    imagenes: [
      "https://img.freepik.com/foto-gratis/delicioso-pastel-limon-merengue-mesa-madera-ai-generativo_123827-24221.jpg?t=st=1722378697~exp=1722382297~hmac=b33ce70e6d07d28ec8c0858f3277d47920f79b2de5790496781044255c3692dc&w=1380",
    ],
  },
  {
    nombre: "Brownie",
    descripcion: "Para los fans del chocolate. Cubierto de merengue",
    precio: 10000,
    imagenes: [
      "https://img.freepik.com/foto-gratis/tarta-pastel-brownie-chocolate-platos-caseros_114579-583.jpg?t=st=1722378798~exp=1722382398~hmac=50ab87b27407a3a514cbaa0dff759cfc4a8c72dc849726da4cd7c3348d550706&w=1380",
      "https://img.freepik.com/foto-gratis/brownie-chocolate-plato-blanco_1150-20895.jpg?t=st=1722378821~exp=1722382421~hmac=356ea20c2fa7c1387aad3711620a8e3f19751a8e8404339d5b0686691b30c7de&w=1380",
    ],
  },
  {
    nombre: "Chocotorta",
    descripcion: "Chocolinas y dulce de leche",
    precio: 9000,
    imagenes: [
      "https://img.freepik.com/foto-gratis/alto-angulo-plato-pastel-cubiertos_23-2148489082.jpg?t=st=1722378921~exp=1722382521~hmac=88ef20395f9fb4edd8454f5bafee7be21358164bb64fe2f7932d71e82cbbbf43&w=1380",
      "https://img.freepik.com/foto-gratis/vista-frontal-concepto-deliciosas-donas_23-2148761670.jpg?t=st=1722378937~exp=1722382537~hmac=b1a68cca3305da627cb1061330810780db68bfe637c519ea961c83047047f573&w=740",
    ],
  },
]
---

<Layout title="Tortas Antito | Tortas caseras hechas con amor.">
  <Header id="main-header" />
  <Header />
  <div class="separador"></div>
  <Hero />
  <div class="container">
    <div class="anuncios">
      <div class="anuncio">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linejoin="round"><circle cx="12" cy="12" r="9" stroke-linecap="round" stroke-width="1.5"/><path stroke-width="2.25" d="M12 16h.01v.01H12z"/><path stroke-linecap="round" stroke-width="1.5" d="M12 12V8"/></g></svg>
        <p>¡Recorda encargar con dos dias de anticipación!</p>
      </div>
      <!-- <div class="anuncio only-desktop">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24"
          ><path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M3 8.593c0-1.527 0-2.29.393-2.735c.139-.159.308-.285.497-.372c1.416-.653 3.272 1.066 4.77 1.013c.197-.007.394-.035.587-.082c2.184-.535 3.552-3.08 5.798-3.39c1.287-.18 2.7.598 3.904 1.014c.99.342 1.485.513 1.768.92C21 5.368 21 5.91 21 6.99v8.421c0 1.527 0 2.29-.393 2.736a1.493 1.493 0 0 1-.497.371c-1.416.653-3.272-1.065-4.77-1.012a2.903 2.903 0 0 0-.587.081c-2.184.535-3.552 3.08-5.798 3.391c-1.281.178-4.847-.75-5.672-1.935C3 18.636 3 18.096 3 17.014V8.593Zm6-2.052v14.255m6-17.615v14.255"
          ></path></svg
        >
        <span>Paraná - Entre Ríos</span>
      </div> -->
    </div>
    <section id="tortas">
      {tortas.slice(1).map((torta, i) => <Torta torta={torta} esPar={i % 2 === 0} />)}
    </section>
    <div class="anuncios only-mobile">
      <div class="anuncio">
        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 24 24"
          ><path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M3 8.593c0-1.527 0-2.29.393-2.735c.139-.159.308-.285.497-.372c1.416-.653 3.272 1.066 4.77 1.013c.197-.007.394-.035.587-.082c2.184-.535 3.552-3.08 5.798-3.39c1.287-.18 2.7.598 3.904 1.014c.99.342 1.485.513 1.768.92C21 5.368 21 5.91 21 6.99v8.421c0 1.527 0 2.29-.393 2.736a1.493 1.493 0 0 1-.497.371c-1.416.653-3.272-1.065-4.77-1.012a2.903 2.903 0 0 0-.587.081c-2.184.535-3.552 3.08-5.798 3.391c-1.281.178-4.847-.75-5.672-1.935C3 18.636 3 18.096 3 17.014V8.593Zm6-2.052v14.255m6-17.615v14.255"
          ></path></svg
        >
        Paraná - Entre Ríos
      </div>
    </div>
    <section id="testimonios">
      <!-- Aquí van los testimonios de los clientes -->
    </section>
    <section id="sobre-mi">
      <!-- Aquí va la información sobre el negocio -->
    </section>
    <section id="contacto">
      <!-- Aquí va la información de contacto -->
    </section>
  </div>
  <Footer />
</Layout>

<style>
  .separador {
    width: 100%;
    height: 50px;
  }

  .anuncios {
    display: grid;
    justify-items: center;
    padding: 50px 0rem;
  }
  .anuncio {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-color-sec);
    color: var(--text-color);
    border-block: 2px solid var(--text-color);
    padding: 20px 16px;
    font-size: 1.2rem;
    font-weight: 500;
    text-align: center;
    width: 100%;
    text-wrap: balance;
  }
  .anuncio svg {
    /* width: 40px; */
    flex-shrink: 0;
    margin-inline-end: 10px;
  }

  @media screen and (min-width: 768px) {
    .anuncio{
    gap: 10px;
    }
    .anuncios {
      /* grid-template-columns: repeat(2, 1fr); */
    }
    .only-mobile {
      display: none;
    }
  }
  @media screen and (max-width: 768px) {
    .only-desktop {
      display: none;
    }
  }
</style>
